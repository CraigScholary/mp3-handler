# Development profile configuration
# Enables ELK logging and uses local whisper transcription

spring:
  application:
    name: mp3-handler-dev

# Point to whisper-python service directly
whisper:
  base-url: ${WHISPER_BASE_URL:http://localhost:8091}
  connect-timeout: 10
  read-timeout: 1800  # 30 minutes for 1-hour chunks
  max-retries: 3

# Logstash configuration for structured logging
logging:
  level:
    com.scholary.mp3.handler: DEBUG
    com.scholary.mp3.handler.chunking: DEBUG
    com.scholary.mp3.handler.service: DEBUG
    com.scholary.mp3.handler.transcript: DEBUG
  logstash:
    host: ${LOGSTASH_HOST:localhost}
    port: ${LOGSTASH_PORT:5044}

# Transcription configuration for dev
transcription:
  chunking:
    maxChunkSeconds: 3600
    minOverlapSeconds: 30
    maxFileDurationHours: 24
  merge:
    contextWindowWords: 10
    minSimilarityThreshold: 0.8
  tempDir: ${java.io.tmpdir}/mp3handler
  asyncExecutorThreads: 4
  asyncExecutorQueueSize: 100

# Object storage (MinIO)
objectstore:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:admin}
  secret-key: ${MINIO_SECRET_KEY:admin123}
  bucket: ${MINIO_BUCKET:audio-dev}
  region: us-east-1
  path-style-access: true

# Actuator endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  metrics:
    export:
      prometheus:
        enabled: true
